language: java
jdk:
  - openjdk11
cache:
  directories:
  - "$HOME/.m2/repository"
branches:
  only:
  - master
  - "/^iterator-validation-matchers-[0-9]+\\.[0-9]+\\.[0-9]+/"
after_success:
- mvn clean test jacoco:report coveralls:report
- test "${TRAVIS_PULL_REQUEST}" == "false" && test "${TRAVIS_TAG}" != "" && mvn deploy --settings settings.xml
env:
  global:
  - secure: Dlf0TC10IYH/DcmI5Z+5V75nh8i2GbL8lIZVVgPZrvL1OFR8PKRX0182+ILcJA62kI3vGEvZ46tTuE5ifRX2NdYUcr2jHIvryv1RLsYs8cAv/tcnjyLsqpTNrTsS6ZZe+oiZkwOTafUUEZR2PuioVAXy70NUHOK06pjke20WsRqyzq88dyT3fp10bkP+cAIwI+GWqoJaCGlagnpR+1OcYAnO2btlGI1DrRPhR+ynmLVlusltF5THLA0yMTHZDTiceZeFxCurfQGmahTqm99lTKSm9LguqvZzPY7i3FlstmmOdIYZ/fLap6Gq5v6lutpJ1xIA+MjEfQwK3kfnN41zpE1ICcMDpSoAg5zfHWj22nTbq38RUk1xSAZYt4ho/Xwz4AjLIExJgtAwf3gKA+bMib5ZGrzIv3LnR3FoEis7FNFyiSKGLJr06WkqW4vCBKCUROXipBFyPQSzolatzGEM/fe6Ave0+yKDc7YYZ92qo/7M4jxneV52mAXaSlI6+Ssfq0HrBnqS4JrwGnekbr0c3fozLr0hr5Ge1vubuKDY6/1t0FV/9lubDzBWizG+s/31PsVPeWbudUVimmHH6uPaEYM5RjGtyJKbreIRq8xSC0ybUpou4X19lkjTYV+vgo/ST5U7lDEHCkk1vhtUHdGSpSeNe7LcUfVNr75F5aWOqEE=
  - secure: eutkc0D2jmMz+Dy1bdRx9kwOGu4+gsh5b2q5vtZQhLeZEezGWw7nsCp1mxkgShqV4fUXLTcUKLiEHNI8GlW4kYOW1AxIVDVTrSWuNwcpSRdEZit9ExemXdDaq7O3dWqT2gKg9G3O/Jtd0Jd6ZTif5ltl4nkhmUZ3rfRHtQLi+gOf+ogF1rGbhnSvhijei62VyqUN8EJWp0HTXxAJ56MDaJwqkj5tfz2sSAv9SSzAolqjrxwcJ1P0WaE9Cfkf4HYaMC2PTP9tO62YDt77FsjaB0Df572U2dQ0bvYRf+rfoCYVCOTQ0JZJ5LDotCq9T0Kz7m3zOtPQX3MO4mkk9V4YR9W4jfdk5CDsHocgU9lTE/IwDolkfLoJ1XWFHN9w2/JLN5kcy8NXEehKq+MFgd8J0cyErcPdhSmc/CEtB+KXIl5m8SwEfb2w6MizwKk7dMFaqQxm1q9YnIh2DtrjjGqzY7z8W2lxP4cCFMMox3wP+WUW8UxSgeDjcBiRvpp4fD9SsLzwPP7i9XTM7SXxDFeufsApmScnhu1Eu31pNFlN84kB7j7U2zyFB+h5Dgjr/sxlubi98w85Mj98zmZbzFwjZxUVgFe1vm/ygzGUmOiBhANeqwW2Sji6L9KIe84qjpeliH2xRwEGMAc8EVxmnNlVBqJz8aD4ElpfbRZcjbG3Evc=
  - secure: UEofzLWUNkfEMfTVWmAe0VtgHyw5dIUAUIRfCYkug7Iey6LkPXP6TCVE66OpN/bheZizHRfYwoUdXVowBTqgha127cX6vOq/rSxPJLUcP5BGi1K3qzBjCZ4I0fUCYT7jp7abQZHgbQoJpsHFtG/xW6SKKM7Hlp1CwWQ7KpLTk0ZDXXk3pQfdN4nrafczH7TXV7ePpwcIMpJb7ImkH2anJJPz+EJo3ykOojiWAHbSBe3PCToPl+SHS7bkBYc8XAXV+o/30pUYdndLDJz/AnLlKT9URVcmPNrX+pLQO1EIqVTw8w/ykS2NrwzRo3bGzNziweugMHg62ISe/5EaUFrHPbFKM3XrL59ktH4BLLrdWNtTik/cgkYM7MS7s+MoW6wK2sLg/YGqnumOoY3RlQ+pwW0sfGrpQM2+WoGi0OXudNibWAXlDAZwSOqjQ3ju1xRUnftqIsD3t6R5c6xvrRxpHblqGeWEYStONLWeWY08KbdtzpbJgMrh6cABU4S20YETX7F/SF3bcDG+nSc0ud76SmtEIFwX70g5K35U+Q+lDdlrIE+ptwvLeqza9IT3kBSW6QxoW3LNVD807SzJDWGs1151+fKC0nvOx9++X2DL/YSwcBguzTiprCdAQ2tUo372bvyX9F5A/jDP0WEeC1X7AT1xQFB2+0GAqYopdJGcT+M=
addons:
  sonarcloud:
    organization: "iteratoruk"
    token:
      secure: "YTr2L/6jMvYrScxHfpbqgei/lJKTubxOlfRuIF2IfrXnC47PmAUv1FOnME5gmpc7g4Mh2Cm9CvuLyvVLOYXRQzaiEjGWTYcL9U7AkzZzCU6p3AuJIT9D0TLR2aOetOheZKp5AR8kPBsinnORgwT/0DDwXptBVnQKh6pPkk4gR0pciXw4S8aKgaJi8VpncGk2zEqo1F7CR/gE0JiNmWvimJRnVSENZW/GJqiadSG+eEv0vmxNu8tpiV3+nfkXAxxinCf8tyZqRltJFYps8fJsBni+eGDOWddRfAXORgX+JMutLjMTrvhmWF3VRYXpH/MDY2H03hLA7V9XPP3NpF9S1Hj91DSESm2ku2HiOyOg/iEQ7pO6scoErxuvYnaHL0jO6oKLHhMx/jRcWLbB0kul6HiqCkNxhhnitY1Wx426MhbQUdcieDnFO7xMVaz5yVmyj+metXooJCfKIwb5QMkiugQP3+XiKGaQHlneGKBhP+/4+QzrNEilSmY54AFkcmbvbWp2kxzIJ39XFJfgNoXKf8fMxZI/jsxnYBIoljIKrENvFzo3BSJl9e0fi0COUdlX1ej8lpskJskVOhaD7a8OtrL7mkbWCAg2AT64UTlfeCDrnD3ZFo0m4aolaAG3za7dPSHLksj8RxERoqSBsJU89wMgqc8MNuD32TaYVmCi8UM="
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=iteratoruk_iterator-validation-matchers
